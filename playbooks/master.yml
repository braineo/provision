---
- hosts: all

  vars_files:
    - vars/common.yml
    - vars/user.yml

  pre_tasks:
    - include_vars: "vars/{{ ansible_distribution }}.yml"
      tags: always

  roles:
    - { role: debian, when: ansible_distribution == 'Debian' }
    - { role: macos, when: ansible_distribution == 'MacOSX'}
    - { role: arch, when: ansible_distribution == 'Archlinux'}
    - common
